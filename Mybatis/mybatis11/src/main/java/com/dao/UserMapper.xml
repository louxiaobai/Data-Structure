<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.UserMapper">


<!--    添加用户信息-->

    <insert id="add" parameterType="user">

         insert into smbms_user (id,userCode,userName,userPassword,gender,birthday,phone,address,userRole,createdBy,creationDate,modifyBy,modifyDate)

         values (#{id},#{userCode},#{userName},#{userPassword},#{gender},#{birthday},#{phone},#{address},#{userRole},#{createdBy},#{creationDate},#{modifyBy},#{modifyDate})


    </insert>

<!--    查询全部的用户-->

    <select id="getUser" resultType="user">

            select * from smbms_user limit #{startIndex},#{pageSize}

    </select>

<!--   根据条件查询  登录的用户-->
    <select id="getLoginUser" resultType="user">

        select * from smbms_user
        <where>
            userCode=#{userCode}
        </where>

    </select>


<!--    按照一定条件的分页查询-->
    <select id="getUserList" resultType="user">

            select * from smbms_user

            <where>
                <if test="userName!=null"> and userName=#{userName}</if>
                <if test="userRole!=null"> and userRole=#{userRole}</if>
            </where>

           limit #{currentPageNO},#{pageSize}

    </select>

<!--    查询用户记录数-->

    <select id="getUserCount" resultType="int">
        select count(*) from smbms_user
        <where>
            <if test="userName!=null"> and userName=#{userName}</if>
            <if test="userRole!=null"> and userRole=#{userRole}</if>
        </where>
    </select>


<!--    删除指定的用户-->

    <delete id="deleteUserById">

            delete from smbms_user
            <where>
                <if test="id!=null">id=#{id}</if>
            </where>
    </delete>

<!--    查询指定的用户-->

    <select id="getUserById" resultType="user">

      select * from smbms_user

      <where>

          <if test="id!=null">id=#{id}</if>

      </where>

    </select>

<!--    修改用户信息-->

    <update id="modify">

          update smbms_user
          <set>

              <if test="userCode!=null">userCode=#{userCode},</if>
              <if test="userName!=null">userName=#{userName},</if>
          </set>
        <where>

            id=#{id};

        </where>

    </update>

<!--    修改用户密码-->

    <update id="updatePwd" >

        update smbms_user

        <set>

            <if test="userPassword!=null">userPassword=#{userPassword}</if>

        </set>
        <where>

            id=#{id}
        </where>
    </update>


</mapper>


